# Reproduction Instructions for Mutation Testing Script

This document provides detailed instructions on how to run the mutation testing script (mutation.sh).
Refer to scripts/project-config-status.csv for the status of each subject-program. That file indicates
whether a project can be correctly built by scripts/build.xml when following the instructions below.

Before you can run the mutation script, you must setup the testing environment.
You must have JDK 8 as your default java/javac for most of the subject-programs.

1. Install the Randoop and mutation programs (this step only needs to be done once).
   ```
   make
   ```

2. Load the source repository for the subject-program you wish to test.  You can load the source
   for all the subject programs with:
   ```
   make src
   ```
   If you would prefer to load just the source for a single subject program, see the instructions
   at the beginning of the file:
   ```
   ../subject-programs/README.build
   ```

3. Modify the build script for the subject-program you wish to test:
   ```
   ./diff-patch.sh <program name>
   ```

You are now ready to run the mutation test script.

The script takes three parameters:
    - `[jarfile name]`: The name of the jar file of the project for which you want to generate tests
    and perform mutation testing. These should be one of the jarfiles in the `grt-testing/subject-programs` subdirectory.
    - `[directory of project's source code]`: The directory where that project's source code is located.
    This is used for mutation generation and analysis.
    - `[dependency dir]`: the full path name to a directory containing all the `.jar` files needed by the subject program.
    This argument is optional, as most of the programs do not require it.  If needed, it will typically be a 
    directory named `lib`.
    ```
    ./mutation.sh [jarfile] [source dir] [dependency dir]
    ```

The script will generate Randoop's test suites in a "build/test" subdirectory. Compiled tests and code
will be stored in a "build/bin" subdirectory. The script will generate various mutants of the source
project using Major and run these tests on those mutants. Each experiment can run a given number of
times and a given number of seconds per class. Various statistics of each iteration will be logged to
a file "results/info.txt".

**NOTE**: The latest release of Randoop does not implement functionality for Orienteering. If you wish
to work with Orienteering, you should download and build Randoop from Github and replace $RANDOOP_JAR
with the absolute path.  For Demand-driven (PR #1260), GRT Fuzzing (PR #1304), and Elephant Brain (PR #1347),
checkout the respective pull requests from the Randoop repository.

