--- build-variants/build.xml	2024-10-02 01:32:23.000000000 -0700
+++ build.xml	2024-12-22 23:13:52.497026864 -0800
@@ -7,7 +7,7 @@
      ############################################## -->
     <property name="major.jar" value="build/major/lib/major.jar"/>
     <property name="mutator" value=""/>
-    <property name="plugin" value="-Xplugin:MajorPlugin ${mutator}"/>
+    <property name="plugin" value="-Xplugin:MajorPlugin ${mutator} enable.decl.refactor enable.method.refactor"/>
     <property name="jacoco.destfile" value="results/jacoco.exec"/>
 
 <!-- Import JaCoCo Ant tasks -->
@@ -31,13 +31,23 @@
 
 <!-- Target to compile the project -->
     <target name="compile" depends="init" description="Compile">
-        <javac includeantruntime="true" 
-               srcdir="${src}"
-               destdir="build/bin"
-               debug="yes">
-            <classpath location="${major.jar}"/>
-            <compilerarg value="${plugin}"/>
-        </javac>
+        <exec executable="mvn" dir="${src}">
+            <arg value="-B"/>
+            <arg value="clean"/>
+            <arg value="package"/>
+            <arg value="-Dmaven.test.failure.ignore=true"/>
+            <arg value="-Dmaven.javadoc.skip=true"/>
+            <arg value="-Dgrt-testing.basedir=${basedir}"/>
+            <arg value="-Dgrt-testing.major.jar=${major.jar}"/>
+            <arg value="-Dgrt-testing.plugin=${plugin}"/>
+            <arg value="-DskipTests=true"/>
+        </exec>
+        <!-- Copy the compiled classes to the build directory -->
+        <copy todir="build/bin">
+            <fileset dir="${src}/target/classes"/>
+        </copy>
+        <move file="${src}/major.log" todir="./"/>
+        <move file="${src}/mutants.log" todir="./"/>
     </target>
 
 <!-- Target to compile the test suite -->
