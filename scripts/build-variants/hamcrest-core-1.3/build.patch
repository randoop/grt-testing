--- build-variants/build.xml	2024-10-02 01:32:23.888417106 -0700
+++ build.xml	2024-10-08 23:42:42.134836665 -0700
@@ -31,13 +31,19 @@
 
 <!-- Target to compile the project -->
     <target name="compile" depends="init" description="Compile">
-        <javac includeantruntime="true" 
-               srcdir="${src}"
-               destdir="build/bin"
-               debug="yes">
-            <classpath location="${major.jar}"/>
-            <compilerarg value="${plugin}"/>
-        </javac>
+        <!-- Running ant once helps correctly compile the project with Major -->
+        <!-- run `ant -f build-original.xml` -->
+        <ant dir="${src}" antfile="build-original.xml"/>
+
+        <!-- Compile the project -->
+        <ant dir="${src}" target="core">
+            <property name="major.jar" value="${basedir}/${major.jar}"/>
+            <property name="plugin" value="${plugin}"/>
+        </ant>
+
+        <copy todir="build/bin">
+            <fileset dir="${src}/build/temp/hamcrest-core-1.3.jar.contents/"/>
+        </copy>
     </target>
 
 <!-- Target to compile the test suite -->
